{% extends 'base.html' %}
{% load recommended %}

{% block title %}
	{{ object.username }} | {{ block.super }}
{% endblock title%}

<!-- contains our custom JS -->
{% block script %}
<script>
	// runs when page DOM is ready
	$(document).ready(function(){
		loadPartyContainer('party-container')
	});
</script>
{% endblock script %}


{% block content %}
<!-- this div contains only the banner photo -->
<div class='row grey-background'>
	<div class='col-sm-10 offset-sm-1'>
		{% if object.profile.banner %}
		<img src='{{ object.profile.banner.url }}' class='img-fluid rounded mx-auto d-block' style='max-height: 350;'>
		{% else %}
		<!-- this is if we want a blank banner, but right now we're just not adding them -->
		<!-- <img src='/media/banners/blank_banner.png' class='img-fluid rounded mx-auto d-block' style='max-height: 350;'> -->
		{% endif %}
	</div>
</div>
<!-- this contains profile info, like picture, name, bio, etc -->
<div class='row grey-background'>
	<div class='col-sm-2 offset-sm-1 my-3'>
		{% if object.profile.profile_picture %}
		<img src='{{ object.profile.profile_picture.url }}' class="img-thumbnail rounded-circle float-left" style='max-height: 150;'>
		{% else %}
		<!-- this is a blank profile pic, cause we at least need the circle to show -->
		<img src='/media/profile_pics/blank_profile.png' class="img-thumbnail rounded-circle float-left" style='max-height: 150;'>
		{% endif %}
	</div>
	<div class='col-sm-6 my-3'>
		<h2>{{ object.username }}</h2>
		<p>{{ object.profile.bio }}</p>
		<div class='row'>
			<div class='col-sm-4'>
				<p>{{ object.followed_by.all.count }} <small>Followers</small></p>
			</div>
			<div class='col-sm-4'>
				<p>{{ object.profile.get_following.count }} <small>Following</small></p>
			</div>
			<div class='col-sm-4'>
				<p>{{ object.profile.event_count.count }} <small>Events</small></p>
			</div>	
		</div>
	</div>
	<div class='col-sm-2 my-3 text-right'>
		{% if object == request.user %}
		<!-- blank because we dont need the follow button on your own profile -->
		{% else %}
		<!-- gets the follow url via method in the model -->
		<a class='btn btn-outline-secondary mr-auto' href='{{ object.profile.get_follow_url }}'>
			<!-- uses following context from the detailview to set text -->
			{% if following %}Unfollow{% else %}Follow{% endif %}
		</a>
		{% endif %}
	</div>
</div>

<!-- this contains the actual events -->
<div class='row mt-5'>
	<div class='col-sm-8 offset-sm-2'>
		<!-- this holds all of our JS rendered stuff -->
		<!-- the id and dataurl are set so that the base render function can 
		get the appropriate info from them -->
		<div class='ml-1' id='party-container' data-url='/api/{{ user.username }}/events/'></div>

		<!-- this is our load more button for the pagination -->
		<button type="button" class="btn btn-outline-secondary btn-sm btn-block" id='loadmore'>Show More Events</button>
		<!-- this lists the load button off of the bottom -->
		<br><p></p>		
	</div>	
</div>
{% endblock content %}



